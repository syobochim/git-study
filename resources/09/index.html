<!DOCTYPE HTML>

<html lang="en-US">
<head>
	<title>Git Study Part9</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=1274, user-scalable=no">
	<meta name="generator" content="Slide Show (S9)">
	<meta name="author" content="@syoboshim">
	<link rel="stylesheet" href="themes/ribbon/styles/style.css">
	<style>
		#Cover H2 {
			color:#FFF;
			text-align:center;
			font-size:70px;
			}
	</style>
</head>
<body class="list">
	<header class="caption">
		<h1>Git Study Part9</h1>
		<p>@syoboshim</p>
	</header>
	<div class="slide bg" id="Cover"><div>
		<section>
			<header>
				<h2>Git Study Part9</h2>
			</header>
			
			<img src="pictures/git.jpg" alt="">
			<!-- © John Carey, http://fiftyfootshadows.net/ -->
		</section>
	</div></div>

<!-- todo: add slide.classes to div -->
<!-- todo: create slide id from header? like a slug in blogs? -->

<div class="slide" id="2"><div>
		<section>
			<header>
				<h1 id="section">第5章の内容</h1>
			</header>
			<!-- === begin markdown block ===

      generated by markdown 1.1.1 on Ruby 1.9.3 (2013-05-15) [i386-mingw32]
                on 2013-09-27 07:47:28 +0900 with Markdown engine kramdown (1.2.0)
                  using options {}
  -->

<!-- _S9SLIDE_ -->

<ul>
  <li>5 Git での分散作業
    <ul>
      <li>5.1 分散作業の流れ</li>
      <li>5.2 プロジェクトへの貢献</li>
      <li>5.3 プロジェクトの運営</li>
      <li>5.4 まとめ</li>
    </ul>
  </li>
</ul>



		</section>
</div></div>

<div class="slide" id="3"><div>
		<section>
			<header>
				<h1 id="section-1">5.1 分散作業の流れ</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ol>
  <li>中央集権型のワークフロー</li>
  <li>統合マネージャー型のワークフロー</li>
  <li>独裁者と若頭型のワークフロー</li>
</ol>



		</section>
</div></div>

<div class="slide" id="4"><div>
		<section>
			<header>
				<h1 id="section-2">5.1.1 中央集権型のワークフロー</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ol>
  <li>中央にある一つのハブ(リポジトリ) がコードを受け入れる</li>
  <li>他のメンバー全員がそこに作業内容を同期させる
<img src="./pictures/No.5-1.png" alt="図5.1: 中央集権型のワークフロー" />  <em>（Subversionがこれ）</em></li>
</ol>



		</section>
</div></div>

<div class="slide" id="5"><div>
		<section>
			<header>
				<h1 id="git">Gitで同様のことをやるには</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ul>
  <li>小規模なチームに所属</li>
  <li>組織内で既に中央集権型のワークフローになじんでいる<br />
<strong>こういう場合は簡単</strong><br />
チームのメンバー全員がマスタにプッシュすればOK</li>
</ul>



		</section>
</div></div>

<div class="slide" id="6"><div>
		<section>
			<header>
				<h1 id="section-3">5.1.2 統合マネージャー型のワークフロー</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>やり方をざっくりいうと、<br />
書き込み権限を持つ公開リポジトリを各自が持ち<br />
他のメンバーからは読み込みのみのアクセスを許可するという方式  </p>



		</section>
</div></div>

<div class="slide" id="7"><div>
		<section>
			<header>
				<h1 id="section-4">流れ</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ol>
  <li>プロジェクトのメンテナーが公開リポジトリにプッシュする  </li>
  <li>開発者がそのリポジトリをクローンし、変更を加える  </li>
  <li>開発者が各自の公開リポジトリにプッシュする  </li>
  <li>開発者がメンテナーに「変更を取り込んでほしい」というメールを送る  </li>
  <li>メンテナーが開発者のリポジトリをリモートに追加し、それをマージする  </li>
  <li>マージした結果をメンテナーがメインリポジトリにプッシュする  </li>
</ol>



		</section>
</div></div>

<div class="slide" id="8"><div>
		<section>
			<header>
				<h1 id="section-5">ワークフロー図</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><img src="./pictures/No.5-2.png" alt="図5.2: 統合マネージャー型のワークフロー" /><br />
<em>（GitHubがこれ）</em></p>



		</section>
</div></div>

<div class="slide" id="9"><div>
		<section>
			<header>
				<h1 id="section-6">いいところ</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ul>
  <li>プロジェクトを容易にフォークできる</li>
  <li>プッシュした内容をみんなに簡単に見てもらえる</li>
  <li>メインリポジトリのメンテナーはいつでも好きなタイミングで変更を取り込める</li>
  <li>変更を取り込んでもらえるまで作業を止めて待つ必要はない</li>
</ul>



		</section>
</div></div>

<div class="slide" id="10"><div>
		<section>
			<header>
				<h1 id="section-7">5.1.3 独裁者と若頭型のワークフロー</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>何百人もの開発者が参加するような巨大なプロジェクトで採用されている  </p>



		</section>
</div></div>

<div class="slide" id="11"><div>
		<section>
			<header>
				<h1 id="section-8">若頭と独裁者</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ul><li> 若頭(lieutenant)</li></ul>
<p>統合マネージャー(複数人)<br />
それぞれにリポジトリの特定の部分を担当させる  </p>
<ul><li> 慈悲深い独裁者(benevalent dictator) </li></ul>
<p>すべての若頭をまとめる統合マネージャー</p>



		</section>
</div></div>

<div class="slide" id="12"><div>
		<section>
			<header>
				<h1 id="section-9">流れ</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ol>
  <li>一般の開発者はトピックブランチ上で作業を進め、<br />
 master の先頭にリベースする。<br />
 独裁者のmaster ブランチがマスターとなる</li>
  <li>若頭が各開発者のトピックブランチを自分のmaster ブランチにマージする</li>
  <li>独裁者が各若頭のmaster ブランチを自分のmaster ブランチにマージする</li>
  <li>独裁者が自分のmaster をリポジトリにプッシュし、<br />
 他のメンバーがリベースできるようにする</li>
</ol>



		</section>
</div></div>

<div class="slide" id="13"><div>
		<section>
			<header>
				<h1 id="section-10">ワークフロー図</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><img src="./pictures/No.5-3.png" alt="図5.3: 慈悲深い独裁者型のワークフロー" />  </p>



		</section>
</div></div>

<div class="slide" id="14"><div>
		<section>
			<header>
				<h1 id="section-11">いい点</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>一般的ではないが大規模なプロジェクトや高度に階層化された環境では便利<br />
プロジェクトリーダー(独裁者) が大半の作業を委譲し、<br />
サブセット単位である程度まとまってからコードを統合することができる  </p>



		</section>
</div></div>

<div class="slide" id="15"><div>
		<section>
			<header>
				<h1 id="section-12">5.2 プロジェクトへの貢献</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ol>
  <li>コミットの指針</li>
  <li>非公開な小規模のチーム</li>
  <li>非公開で管理されているチーム</li>
  <li>小規模な公開プロジェクト</li>
  <li>大規模な公開プロジェクト</li>
</ol>



		</section>
</div></div>

<div class="slide" id="16"><div>
		<section>
			<header>
				<h1 id="section-13">5.2.1 コミットの指針</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>コミットのルールを守ってプロジェクトを進めていこうね。<br />
仁義あるプロジェクトを目指そう！  </p>

<p>Git プロジェクトでは、パッチの投稿用のコミットを<br />
作成するときのヒントをまとめたドキュメントを用意しています<br />
⇒<a href="https://github.com/git/git/blob/master/Documentation/SubmittingPatches">Documentation/SubmittingPatches</a>  </p>



		</section>
</div></div>

<div class="slide" id="17"><div>
		<section>
			<header>
				<h1 id="section-14">余分な空白文字をいれない</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><code>git diff --check</code>コマンドを使用することで、<br />
余分な空白をチェックしてくれる  </p>



		</section>
</div></div>

<div class="slide" id="18"><div>
		<section>
			<header>
				<h1 id="section-15">例）</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><img src="./pictures/diff_sheck-sample.PNG" alt="ソースに余分な空白を挿入" />  </p>

<p>コマンド実行結果<br />
<img src="./pictures/diff_sheck-kekka.PNG" alt="diff --checkコマンド実行結果" />  </p>



		</section>
</div></div>

<div class="slide" id="19"><div>
		<section>
			<header>
				<h1 id="section-16">コミットは独立させる</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>個々の変更内容を把握しやすくする  </p>

<p>別々の問題の修正で同じファイルを変更している場合は<br />
<code>git add --patch</code>を使う<br />
(一部だけをステージすることができる)<br />
<em>詳細は第6章で！！</em></p>



		</section>
</div></div>

<div class="slide" id="20"><div>
		<section>
			<header>
				<h1 id="section-17">よいコミットメッセージを書く</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>いい感じのコミットメッセージを書きましょう  </p>

<p><strong>一般的な規則</strong></p>

<ul>
  <li>メッセージの最初には変更の概要を一行(50 文字以内)</li>
  <li>その後に空行をひとつ</li>
  <li>より詳しい説明を続ける</li>
</ul>



		</section>
</div></div>

<div class="slide" id="21"><div>
		<section>
			<header>
				<h1 id="section-18">　　</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><code>git log --no-merges</code>を実行すれば<br />
きれいに整形されたプロジェクトの歴史が<br />
どのように見えるかがわかります。  </p>

<p><em>コマンドうってみましょう！</em></p>



		</section>
</div></div>

<div class="slide" id="22"><div>
		<section>
			<header>
				<h1 id="git-1">プロジェクトのタイプ別Gitの使い方</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ul>
  <li>5.2.2 非公開な小規模のチーム</li>
  <li>5.2.3 非公開で管理されているチーム</li>
  <li>5.2.4 小規模な公開プロジェクト</li>
  <li>5.2.5 大規模な公開プロジェクト</li>
</ul>

<p><em>それぞれのプロジェクトで、<br />
どのようにGitを使っていけばいいかの例がのってます</em></p>



		</section>
</div></div>

<div class="slide" id="23"><div>
		<section>
			<header>
				<h1 id="section-19">5.2.2～5.2.5に載っている新たなコマンド(1)</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><code>git request-pull [プル先のブランチ] [Gitリポジトリ]</code><br />
プルしてもらいたい変更の概要が出力される  </p>

<p><em>使用例</em><br />
<code>
$ git request-pull origin/master myfork
</code><br />
<em>出力結果はP134をみてね</em></p>



		</section>
</div></div>

<div class="slide" id="24"><div>
		<section>
			<header>
				<h1 id="section-20">5.2.2～5.2.5に載っている新たなコマンド(2)</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><strong>mergeのオプション</strong>  </p>

<ul>
  <li>
    <p><code>--squash</code>オプション<br />
マージしたいブランチでのすべての作業をひとつのコミットにまとめ、<br />
それを現在のブランチの先頭にマージ</p>
  </li>
  <li>
    <p><code>--no-commit</code>オプション<br />
自動的にコミットを記録しないようGit に指示  </p>
  </li>
</ul>



		</section>
</div></div>

<div class="slide" id="25"><div>
		<section>
			<header>
				<h1 id="section-21">　　</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><em>使用例</em><br />
<code>
$ git merge --no-commit --squash featureB
</code></p>



		</section>
</div></div>

<div class="slide" id="26"><div>
		<section>
			<header>
				<h1 id="section-22">5.2.2～5.2.5に載って   いる新たなコマンド(3)</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><code>git format-patch</code><br />
mbox 形式のファイルが作成される  </p>

<p>コミットメッセージの一行目が件名<br />
残りのコミットメッセージとコミット内容のパッチが本文  </p>

<p>format-patch で作成したメールからパッチを適用すると、<br />
すべてのコミット情報が適切に維持される</p>



		</section>
</div></div>

<div class="slide" id="27"><div>
		<section>
			<header>
				<h1 id="section-23">　　</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><em>使用例</em><br />
<code>
$ git format-patch -M origin/master
</code><br />
-M スイッチ … 名前が変わったことを検出するためのもの  </p>

<p><em>出力結果はP137</em>  </p>



		</section>
</div></div>

<div class="slide" id="28"><div>
		<section>
			<header>
				<h1 id="section-24">　　</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>– の行とパッチの開始位置(lib/simplegit.rb の行) の間に<br />
メッセージを書くと、<br />
メールを受信した人はそれを読むことができますが、<br />
パッチからは除外されます</p>



		</section>
</div></div>

<div class="slide" id="29"><div>
		<section>
			<header>
				<h1 id="section-25">　　</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>メーリングリストへの投稿方法<br />
<a href="https://github.com/git/git/blob/master/Documentation/SubmittingPatches">Documentation/SubmittingPatches</a> に<br />
さまざまなメールソフトでの詳細なメール送信方法が載っている  </p>

<p><em>※メールソフトの機能(自動改行等)によって<br />
　フォーマットが勝手に変わらないよう、設定することができる</em></p>



		</section>
</div></div>

<div class="slide" id="30"><div>
		<section>
			<header>
				<h1 id="section-26">5.3 プロジェクトの運営</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ol>
  <li>トピックブランチでの作業</li>
  <li>メールで受け取ったパッチの適用</li>
  <li>リモートブランチのチェックアウト</li>
  <li>何が変わるのかの把握</li>
  <li>提供された作業の取り込み</li>
  <li>リリース用のタグ付け</li>
  <li>ビルド番号の生成</li>
  <li>リリースの準備</li>
  <li>短いログ</li>
</ol>



		</section>
</div></div>

<div class="slide" id="31"><div>
		<section>
			<header>
				<h1 id="section-27">5.3.1 トピックブランチでの作業</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>新しい機能を組み込もうと考えている場合は<br />
トピックブランチを作るのがおすすめ！<br />
<em>※トピックブランチ … 一時的に作るブランチ</em>  </p>

<p>使用コマンド<br />
ブランチ作成 … <code>$ git branch [ブランチ名] master</code><br />
ブランチ切替 … <code>$ git checkout -b [ブランチ名] master</code></p>



		</section>
</div></div>

<div class="slide" id="32"><div>
		<section>
			<header>
				<h1 id="section-28">　　</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><strong>いいところ</strong><br />
うまくいかなかったときにすぐ戻すことができる！  </p>

<p>※一般的なトピックブランチの名前<br />
<code>[作業者名]/[作業内容]</code>  </p>

<p><em>例)</em> <code>sc/ruby_client</code></p>



		</section>
</div></div>

<div class="slide" id="33"><div>
		<section>
			<header>
				<h1 id="section-29">5.3.2 メールで受け取ったパッチの適用</h1>
			</header>
			<!-- _S9SLIDE_ -->

<ul>
  <li>apply でのパッチの適用</li>
  <li>am でのパッチの適用</li>
</ul>



		</section>
</div></div>

<div class="slide" id="34"><div>
		<section>
			<header>
				<h1 id="apply-1">apply でのパッチの適用(1)</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>git diff あるいはUnix のdiff コマンドで作ったパッチを<br />
適用する場合に使用。<br />
作業ディレクトリ内のファイルを変更する。<br />
※コミットを作成するわけではない（ステージとコミットが別途必要）  </p>

<p>使用コマンド … <code>$ git apply [パッチのフルパス]</code>  </p>



		</section>
</div></div>

<div class="slide" id="35"><div>
		<section>
			<header>
				<h1 id="apply-2">apply でのパッチの適用(2)</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><strong>パッチがちゃんとあたっているか確認することができる</strong>  </p>

<p>使用コマンド … <code>$ git apply --check [パッチ名]</code>  </p>

<p><em>※きちんと適用されていれば何も表示されない</em><br />
<em>※チェックに失敗したらゼロ以外の値が返る</em>  </p>



		</section>
</div></div>

<div class="slide" id="36"><div>
		<section>
			<header>
				<h1 id="am-1">am でのパッチの適用(1)</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>format-patch コマンドを使って作ったパッチを適用する場合に使用。  </p>

<p>git send-emailを使用してつくったメールをmbox形式で保存して<br />
コマンドを使用する。<br />
※コミットを自動でやってくれる  </p>

<p>使用コマンド … <code>$ git am [パッチ名]</code>  </p>



		</section>
</div></div>

<div class="slide" id="37"><div>
		<section>
			<header>
				<h1 id="am-2">am でのパッチの適用(2)</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><strong>コミット時の情報は自動で取得される！</strong>  </p>

<ul>
  <li>作者の情報 … メールのFrom ヘッダとDate ヘッダ  </li>
  <li>コミットメッセージ … Subject とメールの本文</li>
</ul>



		</section>
</div></div>

<div class="slide" id="38"><div>
		<section>
			<header>
				<h1 id="am-3">am でのパッチの適用(3)</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p><strong>パッチの適用に失敗した場合</strong>  </p>

<ul>
  <li>ログとしてエラーが表示される</li>
  <li>問題が発生したファイルに衝突マークを書き込まれる</li>
</ul>

<p>ファイルを修正した後に、<br />
<code>$ git add [修正ファイル名]</code><br />
<code>$ git am --resolved</code></p>



		</section>
</div></div>

<div class="slide" id="39"><div>
		<section>
			<header>
				<h1 id="am-4">am でのパッチの適用(4)</h1>
			</header>
			<!-- _S9SLIDE_ -->

<p>-3 オプションを使うと</p>
<!-- === end markdown block === -->

		</section>
</div></div>


	<!--
		To hide progress bar from entire presentation
		just remove “progress” element.
		-->
	<div class="progress"><div></div></div>
	<script src="scripts/script.js"></script>
	<!-- Copyright © 2010–2011 Vadim Makeev, http://pepelsbey.net/ -->
</body>
</html>
